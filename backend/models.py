from sqlalchemy import Column, String, Text, Boolean, DateTime, Numeric, Date, ForeignKey, CheckConstraint, UniqueConstraint\nfrom sqlalchemy.dialects.postgresql import UUID\nfrom sqlalchemy.orm import declarative_base\nfrom sqlalchemy.sql import func\nimport uuid\n\nBase = declarative_base()\n\nclass Tenant(Base):\n    __tablename__ = "tenants"\n\n    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)\n    logo_url = Column(Text, nullable=True)\n    firebase_uid = Column(String(255), nullable=False, unique=True)\n    email = Column(String(255), nullable=False, unique=True)\n    full_name = Column(String(255), nullable=True)\n    phone_number1 = Column(String(20), nullable=True)\n    phone_number2 = Column(String(20), nullable=True)\n    house_number = Column(String(50), nullable=True)\n    street_area = Column(String(255), nullable=True)\n    postal_code = Column(String(20), nullable=True)\n    city = Column(String(100), nullable=True)\n    state = Column(String(100), nullable=True)\n    country = Column(String(100), nullable=True)\n    active = Column(Boolean, default=True)\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n    updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now())\n\nclass LookupValue(Base):\n    __tablename__ = "lookup_values"\n\n    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)\n    category = Column(String(100), nullable=False)\n    value = Column(String(255), nullable=False)\n    description = Column(Text, nullable=True)\n    \n    __table_args__ = (\n        UniqueConstraint('category', 'value', name='unique_category_value'),\n    )\n\nclass Client(Base):\n    __tablename__ = "clients"\n\n    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)\n    tenant_id = Column(UUID(as_uuid=True), ForeignKey('tenants.id'), nullable=True)\n    firebase_uid = Column(String(255), nullable=False, unique=True)\n    email = Column(String(255), nullable=False, unique=True)\n    full_name = Column(String(255), nullable=True)\n    phone_number1 = Column(String(20), nullable=True)\n    phone_number2 = Column(String(20), nullable=True)\n    house_number = Column(String(50), nullable=True)\n    street_area = Column(String(255), nullable=True)\n    postal_code = Column(String(20), nullable=True)\n    city = Column(String(100), nullable=True)\n    state = Column(String(100), nullable=True)\n    country = Column(String(100), nullable=True)\n    profile_image = Column(Text, nullable=True)\n    google_sign_in = Column(Boolean, default=True)\n    profile_completed = Column(Boolean, default=False)\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n    updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now())\n\nclass Pet(Base):\n    __tablename__ = "pets"\n\n    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)\n    tenant_id = Column(UUID(as_uuid=True), ForeignKey('tenants.id'), nullable=True)\n    client_id = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n    name = Column(String(255), nullable=False)\n    animal_type_id = Column(UUID(as_uuid=True), ForeignKey('lookup_values.id'), nullable=True)\n    breed_id = Column(UUID(as_uuid=True), ForeignKey('lookup_values.id'), nullable=True)\n    color_id = Column(UUID(as_uuid=True), ForeignKey('lookup_values.id'), nullable=True)\n    dob = Column(Date, nullable=True)\n    gender = Column(String(10), nullable=True)\n    weight_kg = Column(Numeric(5, 2), nullable=True)\n    microchip_number = Column(String(50), unique=True, nullable=True)\n    vaccinated = Column(Boolean, default=False)\n    last_vaccination_date = Column(Date, nullable=True)\n    vaccination_notes = Column(Text, nullable=True)\n    neutered_or_spayed = Column(Boolean, default=False)\n    medical_conditions = Column(Text, nullable=True)\n    special_notes = Column(Text, nullable=True)\n    profile_image = Column(Text, nullable=True)\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n    updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now())\n    created_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n    updated_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n    \n    __table_args__ = (\n        CheckConstraint("gender IN ('Male', 'Female')", name='check_gender'),\n    )\n\nclass Room(Base):\n    __tablename__ = "rooms"\n\n    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)\n    tenant_id = Column(UUID(as_uuid=True), ForeignKey('tenants.id'), nullable=True)\n    room_number = Column(String(50), nullable=False)\n    type = Column(String(50), nullable=True)\n    status = Column(String(50), default='Available')\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n    updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now())\n    created_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n    updated_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n\nclass Booking(Base):\n    __tablename__ = "bookings"\n\n    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)\n    tenant_id = Column(UUID(as_uuid=True), ForeignKey('tenants.id'), nullable=True)\n    pet_id = Column(UUID(as_uuid=True), ForeignKey('pets.id'), nullable=True)\n    room_id = Column(UUID(as_uuid=True), ForeignKey('rooms.id'), nullable=True)\n    check_in_datetime = Column(DateTime(timezone=True), nullable=False)\n    check_out_datetime = Column(DateTime(timezone=True), nullable=False)\n    status = Column(String(50), default='Tentative')\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n    updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now())\n    created_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n    updated_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n    \n    __table_args__ = (\n        CheckConstraint("status IN ('Tentative', 'Confirmed', 'Completed', 'Cancelled')", name='check_status'),\n    )\n\nclass FeedingSchedule(Base):\n    __tablename__ = "feeding_schedule"\n\n    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)\n    pet_id = Column(UUID(as_uuid=True), ForeignKey('pets.id'), nullable=True)\n    meal_time = Column(String(50), nullable=True)\n    food_type = Column(String(255), nullable=True)\n    notes = Column(Text, nullable=True)\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n    updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now())\n    created_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n    updated_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n\nclass Medication(Base):\n    __tablename__ = "medications"\n\n    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)\n    pet_id = Column(UUID(as_uuid=True), ForeignKey('pets.id'), nullable=True)\n    medicine_name = Column(String(255), nullable=True)\n    dosage = Column(String(100), nullable=True)\n    frequency = Column(String(100), nullable=True)\n    notes = Column(Text, nullable=True)\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n    updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now())\n    created_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n    updated_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n\nclass PetVaccination(Base):\n    __tablename__ = "pet_vaccinations"\n\n    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)\n    pet_id = Column(UUID(as_uuid=True), ForeignKey('pets.id'), nullable=True)\n    vaccine_name = Column(String(255), nullable=True)\n    date_administered = Column(Date, nullable=True)\n    next_due_date = Column(Date, nullable=True)\n    notes = Column(Text, nullable=True)\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n    updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now())\n    created_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n    updated_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n\nclass PetHealthRecord(Base):\n    __tablename__ = "pet_health_records"\n\n    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)\n    pet_id = Column(UUID(as_uuid=True), ForeignKey('pets.id'), nullable=True)\n    record_date = Column(Date, nullable=False)\n    description = Column(Text, nullable=True)\n    notes = Column(Text, nullable=True)\n    vet_name = Column(String(255), nullable=True)\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n    updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now())\n    created_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n    updated_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n\nclass PetImage(Base):\n    __tablename__ = "pet_images"\n\n    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)\n    pet_id = Column(UUID(as_uuid=True), ForeignKey('pets.id', ondelete='CASCADE'), nullable=True)\n    tenant_id = Column(UUID(as_uuid=True), ForeignKey('tenants.id'), nullable=True)\n    image_type = Column(String(50), nullable=True)\n    image_url = Column(Text, nullable=False)\n    uploaded_at = Column(DateTime(timezone=True), server_default=func.now())\n    description = Column(Text, nullable=True)\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n    updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now())\n    created_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n    updated_by = Column(UUID(as_uuid=True), ForeignKey('clients.id'), nullable=True)\n    \n    __table_args__ = (\n        CheckConstraint("image_type IN ('profile', 'vaccination', 'boarding', 'other')", name='check_image_type'),\n    )\n